---
// renders the book cover on the homepage / index.astro
import { Picture } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
interface Props {
	post: CollectionEntry<'book'>;
}

const { post } = Astro.props;
const altContent = [post.data.title + " by " + post.data.author + " finished on " + post.data.finishDate];
const bookCover  = ["/covers/" + post.data.coverImage];
const searchable = [post.data.title + post.data.author + post.data.finishDate];
---

<article class="post-preview searchable grid items-end">
	<a href={"/book/" + post.slug + "/"}>
		{post.data.coverImage && <img src={bookCover} alt={altContent} width="480" height="100%" class="book-cover" decoding="async" transition:name={post.slug} transition:animate="slide" /> }
		<Picture src={bookCover} formats={['webp']} width="480" height="720" alt={altContent} class="book-cover" decoding="async" transition:name={post.slug} transition:animate="slide"  />
	</a>
		<p class="font-mono text-sm! text-center mt-3 text-gray-600">
			{post.data.notes ? <span><a href={"/book/" + post.slug + "/"}>ğŸ“ Notes</a></span> : <span>&nbsp;</span> }
			{post.data.currentlyReading && <span>ğŸ“– Currently Reading</span>}
		</p>
	<p class="font-mono text-sm! text-center mt-3 text-gray-600">
		{post.data.notes ? <span><a href={"/book/" + post.slug + "/"}>ğŸ“ Notes</a></span> : <span>&nbsp;</span> }
		{post.data.currentlyReading && <span>ğŸ“– Currently Reading</span>}
	</p>
	<div class="hidden">{altContent}</div>
</article>
